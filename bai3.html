<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<p id="kq"></p>
<button onclick="themsach()">Thêm sách</button>
<button onclick="muonsach()">Mượn sách</button>
</body>
</html>

<script>
    let Sach = function(ma, ten, nam, soluong) {
        this.ma = ma;
        this.ten = ten;
        this.nam = nam;
        this.soluong = soluong;
        this.status = true;

        this.getMa = () => this.ma;
        this.setMa = ma => this.ma = ma;

        this.getTen = () => this.ten;
        this.setTen = ten => this.ten = ten;

        this.getNam = () => this.nam;
        this.setNam = nam => this.nam = nam;

        this.getSL = () => this.soluong;
        this.setSL = sl => this.soluong = sl;

        this.getStatus = () => this.status;
        this.setStatus = st => this.status = st;

        // Hàm mượn sách đúng
        this.muon = function() {
            if (this.soluong > 0) {
                this.soluong--;
                if (this.soluong === 0) this.status = false;
            }
        };
    };

    let a = [];

    function themsach() {
        let sach = new Sach();

        sach.setMa(prompt("Nhập mã:"));
        sach.setTen(prompt("Nhập tên:"));
        sach.setNam(prompt("Nhập năm xuất bản:"));
        sach.setSL(parseInt(prompt("Nhập số lượng:")));

        a.push(sach);
        hienthi();
    }

    function muonsach() {
        let ma = prompt("Nhập mã sách muốn mượn:");

        for (let i = 0; i < a.length; i++) {
            if (a[i].getMa() === ma) {
                a[i].muon();
                hienthi();
                return;
            }
        }

        alert("Không tìm thấy sách có mã " + ma);
    }

    function hienthi() {
        let t = "";
        for (let i = 0; i < a.length; i++) {
            let s = a[i];
            t += `Mã: ${s.getMa()} - Tên: ${s.getTen()} - Năm: ${s.getNam()}
                - SL: ${s.getSL()} - Status: ${s.getStatus()} <br>`;
        }
        document.getElementById("kq").innerHTML = t;
    }
</script>
